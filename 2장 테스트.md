# 2장 테스트

## UserDaoTest 다시보기

1. 테스트의 유용성 : 테스트는 결국 내가 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인해서, 만든 코드를 확신할 수 있도록 해주는 작업이다.
2. UserDaoTest의 특징
    1. 자바에서 가장 손쉽게 실행 가능한 main() 메소드를 이용
    2. 테스트할 대상인 UserDao의 오브젝트를 가져와 메소드 호출
    3. 테스트에 사용할 입력 값(User 오브젝트)을 직접 코드에서 만들어 넣음
    4. 테스트의 결과를 콘솔에 출력
    5. 각 단계의 작업이 에러 없이 끝나면 콘솔에 성공 메시지로 출력
3. UserDaoTest의 문제점
    1. 수동 확인 작업의 번거로움
    2. 실행 작업의 번거로움

### UserDaoTest 개선

1. 테스트 검증의 자동화
2. 테스트의 효율적인 수행과 결과 관리
    1. JUnit 테스트로 전환
    2. 테스트 메소드 전환
    3. 검증 코드 전환

### 개발자를 위한 테스팅 프레임워크 JUnit

1. JUnit 테스트 실행 방법
    1. 이클립스 : Run 메뉴 → Run As → JUnit Test
    2. 빌드 툴 : ANT, Maven JUnit 플러그인
2. 테스트 결과의 일관성
    1. 동일한 결과를 보장하는 테스트
3. 포괄적인 테스트
4. 테스트가 이끄는 개발
5. JUnit 테스트 수행 방식
    1. 테스트 클래스에서 @Test가 붙은 public이고 void형이며 파라미터가 없는 테스트 메소드를 모두 찾는다.
    2. 테스트 클래스의 오브젝트를 하나 만든다.
    3. @Before가 붙은 메소드가 있으면 실행한다.
    4. @Test가 붙은 메소드를 하나 호출하고 테스트 결과를 저장해둔다.
    5. @After가 붙은 메소드가 있으면 실행한다.
    6. 나머지 테스트 메소드에 대해 2~5번을 반복한다.
    7. 모든 테스트의 결과를 종합해서 돌려준다.

### 스프링 테스트 적용

1. 테스트를 위한 애플리케이션 컨텍스트 관리
    1. 스프링 테스트 컨텍스트 프레임워크 적용
    2. 테스트 메소드의 컨텍스트 공유
    3. 테스트 클래스의 컨텍스트 공유
2. DI와 테스트
    1. 테스트 코드에 의한 DI
    2. 테스트를 위한 별도의 DI 설정
    3. 컨테이너 없는 DI 테스트
    4. DI를 이용한 테스트 방법 선택

### 학습 테스트(Learning test)로 배우는 스프링

1. 학습 테스트의 장점
    1. 다양한 조건에 따른 기능을 손쉽게 확인해볼 수 있다.
    2. 학습 테스트 코드를 개발 중에 참고할 수 있다.
    3. 프레임워크나 제품을 업그레이드할 때 호환성 검증을 도와준다.
    4. 테스트 작성에 대한 좋은 훈련이 된다.
    5. 새로운 기술을 공부하는 과정이 즐거워진다.
2. 학습 테스트의 예제
    1. JUnit 테스트 오브젝트 테스트
    2. 스프링 테스트 컨텍스트 테스트
3. 버그 테스트
    1. 테스트의 완성도를 높여준다.
    2. 버그의 내용을 명확하게 분석하게 해준다.
    3. 기술적인 문제를 해결하는 데 도움이 된다.

### 정리

- 테스트는 자동화돼야 하고, 빠르게 실행할 수 있어야 한다.
- main() 테스트 대신 JUnit 프레임워크를 이용한 테스트 작성이 편리하다.
- 테스트 결과는 일관성이 있어야 한다. 코드의 변경 없이 환경이나 테스트 실행 순서에 따라서 결과가 달라지면 안 된다.
- 테스트는 포괄적으로 작성해야 한다. 충분한 검증을 하지 않는 테스트는 없는 것보다 나쁠 수 있다.
- 코드 작성과 테스트 수행의 간격이 짧을수록 효과적이다.
- 테스트하기 쉬운 코드가 좋은 코드다.
- 테스트를 먼저 만들고 테스트를 성공시키는 코드를 만들어가는 테스트 주도 개발 방법도 유용하다.
- 테스트 코드도 애플리케이션 코드와 마찬가지로 적절한 리팩토링이 필요하다.
- @Before, @After를 사용해서 테스트 메소드들의 공통 준비 작업과 정리 작업을 처리할 수 있다.
- 스프링 테스트 컨텍스트 프레임워크를 이용하면 테스트 성능을 향상시킬 수 있다.
- 동일한 설정파일을 사용하는 테스트는 하나의 애플리케이션 컨텍스트를 공유한다.
- @Autowired를 사용하면 컨텍스트의 빈을 테스트 오브젝트에 DI 할 수 있다.
- 기술의 사용 방법을 익히고 이해를 돕기 위해 학습 테스트를 작성하자.
- 오류가 발견될 경우 그에 대한 버그 테스트를 만들어두면 유용하다.